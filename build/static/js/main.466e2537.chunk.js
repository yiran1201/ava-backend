(this.webpackJsonpavainterview=this.webpackJsonpavainterview||[]).push([[0],{123:function(e,t,n){},130:function(e,t,n){"use strict";n.r(t);var c=n(2),a=n(63),s=n.n(a),r=n(34),i=n(3),o=n(6),l=n.n(o),d=n(11),j=n(64),u=n(68),b=n(4),x=(n(74),n(75),n(35)),O=n(66),v=n(65),m="",h=n.n(v)()(m),f={DELETE_CONVERSATIONS:"".concat(m,"/conversations"),ADD_CONVERSATION:"".concat(m,"/conversation"),GET_CONVERSATION:"".concat(m,"/conversation"),DELETE_CONVERSATION:"".concat(m,"/conversation"),POST_MUTATION:"".concat(m,"/mutations")},p=n(1),N=function(e){var t=Object(c.useState)(""),n=Object(b.a)(t,2),a=n[0],s=n[1],r=e.index,i=e.conversation,o=e.liked;return Object(c.useEffect)((function(){h.on("updateConversation",(function(e){var t=e.id,n=e.text;t===i.id&&s(n)})),s(i.text)}),[i]),Object(p.jsxs)("div",{className:"conversation-card p-2 rounded",style:{marginTop:0===r?0:15},children:[Object(p.jsx)("div",{className:"text-muted index",children:"#".concat(r+1)}),Object(p.jsx)("div",{children:Object(p.jsx)("span",{className:"card-title",onClick:function(){e.onConversation(i.id)},children:a})}),Object(p.jsxs)("div",{className:"d-flex justify-content-end",children:[Object(p.jsx)("span",{className:"trash mr-1",onClick:function(){e.delConversation(i.id)},children:Object(p.jsx)(O.a,{size:"1.2rem"})}),Object(p.jsx)("span",{className:"star",onClick:function(){e.likeConversation(i.id)},children:o?Object(p.jsx)(x.a,{size:"1.2rem"}):Object(p.jsx)(x.b,{size:"1.2rem"})})]})]})},g=n(12),C=n.n(g),y=(n(123),function(e){var t=Object(c.useState)(""),n=Object(b.a)(t,2),a=n[0],s=n[1],r=e.author,i=e.stared,o=e.total,j=function(){var e=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.a.post(f.ADD_CONVERSATION,{text:a.trim()});case 2:s(""),h.emit("syncConversations");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(p.jsxs)("div",{className:"info-panel d-flex flex-column",children:[Object(p.jsxs)("div",{className:"text-success d-flex align-items-center",children:[Object(p.jsx)("div",{className:"dot mr-2 bg-success"}),Object(p.jsx)("span",{className:"author",children:r})]}),Object(p.jsxs)("div",{className:"mt-2",children:[Object(p.jsx)("div",{className:"label",children:"Stared Convs"}),Object(p.jsx)("div",{className:"text-warning",children:i})]}),Object(p.jsxs)("div",{className:"mt-2",children:[Object(p.jsx)("div",{className:"label",children:"Total Convs"}),Object(p.jsx)("div",{className:"text-info",children:o})]}),Object(p.jsx)("div",{className:"mt-auto"}),Object(p.jsx)("textarea",{value:a,onChange:function(e){return s(e.target.value)}}),Object(p.jsx)("button",{className:"btn btn-success btn-sm btn-block mt-2",onClick:j,disabled:0===a.length,children:"Add Conv"}),Object(p.jsx)("button",{className:"btn btn-danger btn-sm btn-block mt-2",onClick:e.delConversations,children:"Del Convs"})]})}),S=(n(33),n(124),function(e){var t=Object(c.useState)(0),n=Object(b.a)(t,2),a=n[0],s=n[1],r=Object(c.useState)(""),i=Object(b.a)(r,2),o=i[0],j=i[1],u=e.conversationId,x=e.author,O=e.origin,v=function(){var e=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={author:x,conversationId:u,data:{index:a,length:0,text:o,type:"insert"},origin:O},e.next=3,C.a.post(f.POST_MUTATION,t);case 3:s(0),j(""),h.emit("syncConversation",u);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(p.jsxs)("div",{children:[Object(p.jsx)("div",{className:"mt-2",children:Object(p.jsxs)("div",{className:"row",children:[Object(p.jsxs)("div",{className:"col-4 d-flex flex-column",children:[Object(p.jsx)("div",{className:"label",children:"Index"}),Object(p.jsx)("input",{placeholder:"index",type:"number",onKeyDown:function(e){return e.preventDefault()},value:a,onChange:function(e){var t=Number(e.target.value);t<0||s(t)}})]}),Object(p.jsxs)("div",{className:"col-8 d-flex flex-column",children:[Object(p.jsx)("div",{className:"label",children:"Text"}),Object(p.jsx)("input",{placeholder:"word",value:o,onChange:function(e){return j(e.target.value)}})]})]})}),Object(p.jsx)("button",{className:"btn btn-success btn-sm btn-block mt-2",onClick:v,disabled:0===o.trim().length,children:"Insert"})]})}),E=function(e){var t=Object(c.useState)(0),n=Object(b.a)(t,2),a=n[0],s=n[1],r=Object(c.useState)(1),i=Object(b.a)(r,2),o=i[0],j=i[1],u=e.conversationId,x=e.author,O=e.origin,v=function(){var e=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={author:x,conversationId:u,data:{index:a,length:o,text:"",type:"delete"},origin:O},e.next=3,C.a.post(f.POST_MUTATION,t);case 3:s(0),j(1),h.emit("syncConversation",u);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(p.jsxs)("div",{children:[Object(p.jsx)("div",{className:"mt-2",children:Object(p.jsxs)("div",{className:"row",children:[Object(p.jsxs)("div",{className:"col-4 d-flex flex-column",children:[Object(p.jsx)("div",{className:"label",children:"Index"}),Object(p.jsx)("input",{placeholder:"index",type:"number",onKeyDown:function(e){return e.preventDefault()},value:a,onChange:function(e){var t=Number(e.target.value);t<0||s(t)}})]}),Object(p.jsxs)("div",{className:"col-8 d-flex flex-column",children:[Object(p.jsx)("div",{className:"label",children:"Len"}),Object(p.jsx)("input",{placeholder:"length",type:"number",onKeyDown:function(e){return e.preventDefault()},value:o,onChange:function(e){var t=Number(e.target.value);t<1||j(t)}})]})]})}),Object(p.jsx)("button",{className:"btn btn-danger btn-sm btn-block mt-2",onClick:v,children:"Delete"})]})},w=n(36),T=function(e){var t=Object(c.useState)(""),n=Object(b.a)(t,2),a=n[0],s=n[1],r=Object(c.useState)([]),i=Object(b.a)(r,2),o=i[0],j=i[1],u=Object(c.useState)({alice:0,bob:0}),x=Object(b.a)(u,2),O=x[0],v=x[1],m=e.conversationId,N=e.author;Object(c.useEffect)((function(){y()}),[]),Object(c.useEffect)((function(){g()}),[m]);var g=function(){var e=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.a.get("".concat(f.GET_CONVERSATION,"/").concat(m));case 2:t=e.sent,s(t.data.text),j(t.data.mutations),v(t.data.origin);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=function(){h.on("updateConversation",(function(e){var t=e.mutations,n=e.text,c=e.origin;j(t),s(n),v(c)}))},T=function(e){var t=e.author,n=e.data,c=n.type,a=n.index,s=n.length,r=n.text,i=e.origin,o=i.alice,l=i.bob;return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("span",{className:"text-primary text-uppercase mr-1",children:t[0]}),Object(p.jsx)("span",{children:"(".concat(l,", ").concat(o,")")}),Object(p.jsx)("span",{className:Object(w.a)("text-uppercase","mx-1","insert"===c?"text-success":"text-danger"),children:c.slice(0,3)}),Object(p.jsx)("span",{children:a}),Object(p.jsx)("span",{children:":"}),Object(p.jsx)("span",{children:"insert"===c?"'".concat(r,"'"):s})]})};return Object(p.jsxs)("div",{children:[Object(p.jsxs)("div",{children:[Object(p.jsx)("div",{className:"label",children:"Conv ID"}),Object(p.jsx)("div",{className:"id-text",children:m})]}),Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)("div",{className:"mt-2",children:[Object(p.jsx)("div",{className:"label",children:"Text"}),Object(p.jsx)("div",{className:"text-primary",children:a})]}),Object(p.jsxs)("div",{className:"mt-2",children:[Object(p.jsx)("div",{className:"label",children:"Mutation History"}),o.length>0&&o.map((function(e,t){return Object(p.jsx)("div",{className:"border rounded p-1 mt-1 d-flex",children:T(e)},"".concat(e.author,"-").concat(t))})),0===o.length&&Object(p.jsx)("div",{children:"This conversation does not have any mutations"}),Object(p.jsxs)("div",{className:"mt-2",children:[Object(p.jsx)("div",{className:"label",children:"Current State"}),Object(p.jsx)("div",{className:"d-flex align-items-center",children:["alice","bob"].map((function(e){return Object(p.jsxs)("div",{className:Object(w.a)("d-flex flex-column align-items-center mr-3",N===e?"text-success":"text-info"),children:[Object(p.jsx)("span",{className:"text-capitalize",children:e}),Object(p.jsx)("span",{children:O[e]})]},e)}))})]}),Object(p.jsxs)("div",{className:"mt-2",children:[Object(p.jsx)("div",{className:"label",children:"Mutation Operation"}),Object(p.jsx)("div",{className:"text-primary",style:{fontSize:"0.75rem"},children:"Tips: Use \u25b2 / \u25bc for number input"}),Object(p.jsx)(S,{author:N,conversationId:m,origin:O}),Object(p.jsx)(E,{author:N,conversationId:m,origin:O})]})]})]})]})},I=function(){var e=Object(c.useState)([]),t=Object(b.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)(""),r=Object(b.a)(s,2),o=r[0],x=r[1],O=Object(c.useState)(new Set),v=Object(b.a)(O,2),m=v[0],g=v[1],S=Object(c.useState)(""),E=Object(b.a)(S,2),w=E[0],I=E[1],k=Object(i.h)(),D=Object(i.g)();Object(c.useEffect)((function(){h.emit("syncConversations"),_(),function(){var e=k.params.author;["alice","bob"].includes(e)||(e="alice",D.push("/".concat(e))),I(e)}()}),[]),Object(c.useEffect)((function(){A()}),[n]),Object(c.useEffect)((function(){R()}),[o]);var A=function(){var e,t=n.map((function(e){return e.id})),c=Object(u.a)(m),a=new Set,s=Object(j.a)(c);try{for(s.s();!(e=s.n()).done;){var r=e.value;t.includes(r)&&a.add(r)}}catch(i){s.e(i)}finally{s.f()}g(a)},_=function(){h.on("retrieveConversations",(function(e){a(e)}))},R=function(){h.on("clearConversation",(function(e){e===o&&x("")}))},V=function(e){x(e)},z=function(e){var t=new Set(m);t.has(e)?t.delete(e):t.add(e),g(t)},L=function(){var e=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.a.delete(f.DELETE_CONVERSATIONS);case 2:h.emit("syncConversations"),g(new Set),x("");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),M=function(){var e=Object(d.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.a.delete("".concat(f.DELETE_CONVERSATION,"/").concat(t));case 2:h.emit("syncConversations"),h.emit("deleteConversation",t),m.has(t)&&((n=new Set(m)).delete(t),g(n));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsx)("div",{className:"vh-100 mx-auto d-flex justify-content-center",children:Object(p.jsxs)("div",{className:"row homepage",children:[Object(p.jsxs)("div",{className:"col-12 col-sm-4 border-right p-3 panel",children:[0===n.length&&Object(p.jsx)("div",{className:"text-danger text-center",children:"Conversation Empty"}),n.map((function(e,t){return Object(p.jsx)(N,{conversation:e,index:t,onConversation:V,likeConversation:z,delConversation:M,liked:m.has(e.id)},e.id)}))]}),Object(p.jsx)("div",{className:"col-12 col-sm-5 p-3 panel",children:o?Object(p.jsx)(T,{conversationId:o,author:w}):Object(p.jsx)("div",{className:"text-info",children:"Please select a conversation to edit"})}),Object(p.jsx)("div",{className:"col-12 col-sm-3 border-left p-3 panel",children:Object(p.jsx)(y,{author:w,stared:m.size,total:n.length,delConversations:L})})]})})};s.a.render(Object(p.jsx)(r.a,{children:Object(p.jsxs)(i.d,{children:[Object(p.jsx)(i.b,{path:"/:author",component:I}),Object(p.jsx)(i.a,{from:"/",to:"/alice"})]})}),document.getElementById("root"))},33:function(e,t,n){},74:function(e,t,n){},75:function(e,t,n){}},[[130,1,2]]]);
//# sourceMappingURL=main.466e2537.chunk.js.map